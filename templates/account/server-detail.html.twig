{% extends 'account/layout.html.twig' %}

{% set section = server.name %}{# Utilis√© dans account/layout.html.twig #}

{% block title %}Account - {{ server.name }}{% endblock %}

{% block account %}
    <h2 class="mb-5">{{ server.name }}</h2>

    <div class="card">
        <div class="card-header">
            <h1 class="h4 my-2">{{ server.name }}</h1>
        </div>
        <div class="card-body row">
            <div class="col">
                <strong>IP</strong>
                <span class="text-muted">{{ server.ip }}</span>
            </div>
            <div class="col">
                <strong>Status</strong>
                {{ server|server_state_badge }}
            </div>
        </div>
        <div class="card-body border-top">
            <dl class="row mb-0">
                <dt class="col-sm-5">Datacenter</dt>
                <dd class="col-sm-7">{{ server.location.name }}</dd>

                <dt class="col-sm-5">Distribution</dt>
                <dd class="col-sm-7">{{ server.distribution.name }}</dd>

                <dt class="col-sm-5">CPU</dt>
                <dd class="col-sm-7">{{ server.cpu }} Intel CPUs</dd>

                <dt class="col-sm-5">RAM</dt>
                <dd class="col-sm-7">{{ server.ram }} GB</dd>
            </dl>
        </div>
        <div class="card-body border-top">
            <a class="btn btn-primary me-3" href="{{ path('account_server_reboot', {'id': server.id}) }}">
                Restart
            </a>
            <a class="btn btn-light" href="{{ path('account_server_reset', {'id': server.id}) }}">
                Reset
            </a>
        </div>
        <div class="card-body border-top">
            <form class="row row-cols-lg-auto g-3 align-items-center"
                  action="{{ path('account_server_delete', {'id': server.id}) }}"
                  method="post">
                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="delete-confirm" name="delete" value="1" required>
                        <label class="form-check-label" for="delete-confirm">
                            Confirm server deletion
                        </label>
                    </div>
                </div>

                <div class="col-12">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </form>

        </div>
    </div>
{% endblock %}
